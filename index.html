<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ff4d7d">
    <title>æƒ…ä¾£é»˜å¥‘æŒ‘æˆ˜ â¤ï¸</title>
    <style>
        :root {
            --primary: #ff4d7d;
            --primary-dark: #ec2f66;
            --accent: #8c6bff;
            --bg: linear-gradient(135deg, #ffdce7 0%, #f7e8ff 45%, #e4f0ff 100%);
            --text: #2f2f39;
            --muted: #73738a;
            --card: rgba(255, 255, 255, 0.96);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html,
        body {
            width: 100%;
            min-height: 100%;
            overscroll-behavior: none;
            -webkit-overflow-scrolling: auto;
        }

        body {
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            color: var(--text);
            background: var(--bg);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            overflow: hidden;
        }

        .card {
            width: min(94vw, 32rem);
            min-height: 36rem;
            background: var(--card);
            border-radius: 1.25rem;
            box-shadow: 0 1rem 2.2rem rgba(136, 108, 182, 0.22);
            padding: 1.35rem;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.7);
        }

        .top-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            font-size: 0.85rem;
            color: #fff;
            padding: 0.32rem 0.7rem;
            border-radius: 999px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            margin-bottom: 1rem;
        }

        .title {
            font-size: 1.75rem;
            line-height: 1.35;
            color: var(--primary-dark);
            font-weight: 800;
            margin-bottom: 0.55rem;
        }

        .desc {
            font-size: 0.98rem;
            color: var(--muted);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .section {
            display: none;
            animation: fadeIn 0.35s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(8px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .heart {
            width: 5.8rem;
            height: 5.2rem;
            margin: 0.6rem auto 1.2rem;
            position: relative;
            animation: beat 1.2s infinite;
        }

        .heart:before,
        .heart:after {
            content: "";
            position: absolute;
            top: 0;
            width: 2.9rem;
            height: 4.7rem;
            background: var(--primary);
            border-radius: 2.9rem 2.9rem 0 0;
        }

        .heart:before {
            left: 2.9rem;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
        }

        .heart:after {
            left: 0;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }

        @keyframes beat {
            0%,
            100% {
                transform: scale(1);
            }
            25% {
                transform: scale(1.18);
            }
            50% {
                transform: scale(1);
            }
        }

        .name-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.65rem;
            margin-bottom: 1rem;
        }

        .input {
            width: 100%;
            border: 1px solid #e7dff0;
            border-radius: 0.8rem;
            padding: 0.7rem 0.85rem;
            font-size: 0.95rem;
            color: var(--text);
            background: #fff;
            outline: none;
        }

        .input:focus {
            border-color: #d8b9ff;
            box-shadow: 0 0 0 3px rgba(216, 185, 255, 0.18);
        }

        .btn {
            width: 100%;
            border: none;
            border-radius: 999px;
            padding: 0.82rem 1rem;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.18s, box-shadow 0.18s;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-main {
            color: #fff;
            background: linear-gradient(135deg, var(--primary), #ff7ea1);
            box-shadow: 0 0.7rem 1.4rem rgba(255, 77, 125, 0.3);
        }

        .btn-sub {
            color: #564f66;
            background: #f3ecff;
            margin-top: 0.55rem;
        }

        .progress {
            margin: 0.2rem 0 1rem;
        }

        .progress-text {
            font-size: 0.9rem;
            color: var(--muted);
            margin-bottom: 0.4rem;
            display: flex;
            justify-content: space-between;
        }

        .bar {
            width: 100%;
            height: 0.5rem;
            border-radius: 999px;
            background: #f1e8fb;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, var(--accent), var(--primary));
            transition: width 0.25s;
        }

        .question {
            background: #fff;
            border: 1px solid #f0e8fb;
            border-radius: 1rem;
            padding: 1rem;
            font-size: 1.15rem;
            line-height: 1.5;
            margin-bottom: 0.85rem;
            min-height: 5.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .turn {
            font-size: 0.95rem;
            text-align: center;
            color: #6f6389;
            margin-bottom: 0.8rem;
            min-height: 1.4rem;
            font-weight: 600;
        }

        .choices {
            display: grid;
            gap: 0.65rem;
            margin-bottom: 0.7rem;
        }

        .choice-btn {
            border: 1px solid #ebdff8;
            background: #fff;
            color: var(--text);
            border-radius: 0.95rem;
            font-size: 1rem;
            padding: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            text-align: left;
            transition: 0.18s;
        }

        .choice-btn:hover {
            border-color: #cfa8ff;
            transform: translateY(-2px);
        }

        .tip {
            text-align: center;
            font-size: 0.85rem;
            color: #8e84a2;
        }

        .score {
            margin-top: 0.45rem;
            background: #fff;
            border: 1px dashed #edc9d7;
            border-radius: 1rem;
            text-align: center;
            padding: 1rem;
        }

        .score-num {
            font-size: 2.1rem;
            color: var(--primary-dark);
            font-weight: 800;
            line-height: 1.2;
        }

        .result-title {
            margin-top: 0.9rem;
            font-size: 1.28rem;
            color: #51496a;
            font-weight: 700;
            text-align: center;
        }

        .result-desc {
            margin-top: 0.45rem;
            color: #746a89;
            line-height: 1.7;
            text-align: center;
            min-height: 3.4rem;
            font-size: 0.95rem;
        }

        .answer-list {
            margin-top: 0.95rem;
            border-radius: 0.9rem;
            background: #fff;
            border: 1px solid #efe6fa;
            max-height: 8.9rem;
            overflow: auto;
            padding: 0.6rem;
        }

        .answer-item {
            font-size: 0.86rem;
            color: #645b79;
            padding: 0.45rem;
            border-radius: 0.55rem;
        }

        .answer-item + .answer-item {
            margin-top: 0.4rem;
            border-top: 1px solid #f4eefa;
        }

        .good {
            color: #1f9b63;
            font-weight: 700;
        }

        .bad {
            color: #d93b6d;
            font-weight: 700;
        }

        .float-heart {
            position: fixed;
            pointer-events: none;
            font-size: 1.35rem;
            opacity: 0;
            animation: floatUp 2.8s linear forwards;
            z-index: 0;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(0.9);
                opacity: 1;
            }
            100% {
                transform: translateY(-68vh) scale(1.25) rotate(18deg);
                opacity: 0;
            }
        }

        .footer {
            text-align: center;
            font-size: 0.8rem;
            color: rgba(72, 52, 100, 0.45);
            margin-top: 0.8rem;
        }

        @media (max-width: 420px) {
            .card {
                min-height: 35.2rem;
                padding: 1rem;
            }

            .title {
                font-size: 1.55rem;
            }

            .question {
                font-size: 1.05rem;
            }

            .choice-btn {
                font-size: 0.95rem;
            }
        }
    </style>
</head>
<body>
    <main class="card">
        <section id="startSection" class="section active">
            <div class="top-badge">ğŸ’‘ æƒ…ä¾£äº’åŠ¨å°æ¸¸æˆ</div>
            <div class="heart"></div>
            <h1 class="title">å¿ƒåŠ¨é»˜å¥‘æŒ‘æˆ˜</h1>
            <p class="desc">ä¸¤ä¸ªäººè½®æµç­”é¢˜ï¼Œçœ‹çœ‹ä½ ä»¬åˆ°åº•æœ‰å¤šæ‡‚å½¼æ­¤ã€‚æ¯é¢˜åŒé€‰å¾—åˆ†ï¼Œåˆ†æ•°è¶Šé«˜é»˜å¥‘è¶Šé«˜ã€‚</p>
            <div class="name-row">
                <input id="nameA" class="input" maxlength="10" placeholder="ç©å®¶Aæ˜µç§°ï¼ˆå¯é€‰ï¼‰">
                <input id="nameB" class="input" maxlength="10" placeholder="ç©å®¶Bæ˜µç§°ï¼ˆå¯é€‰ï¼‰">
            </div>
            <button id="startBtn" class="btn btn-main">å¼€å§‹æŒ‘æˆ˜</button>
            <p class="tip" style="margin-top: 0.6rem;">ç­”é¢˜æ—¶å»ºè®®å½¼æ­¤ä¸è¦å·çœ‹å“¦ âœ¨</p>
            <div class="footer">ä»Šå¤©ä¹Ÿè¦å¥½å¥½ç›¸çˆ±</div>
        </section>

        <section id="gameSection" class="section">
            <div class="top-badge">ğŸ® è¿›è¡Œä¸­</div>
            <div class="progress">
                <div class="progress-text">
                    <span id="progressLabel">ç¬¬ 1 / 6 é¢˜</span>
                    <span id="scoreLabel">å½“å‰åˆ†æ•° 0</span>
                </div>
                <div class="bar">
                    <div id="barFill" class="bar-fill"></div>
                </div>
            </div>
            <div id="questionText" class="question"></div>
            <div id="turnText" class="turn"></div>
            <div id="choices" class="choices"></div>
            <p class="tip" id="tipText">åŒä¸€é¢˜ä¸¤ä¸ªäººéƒ½ç­”å®Œæ‰ä¼šè¿›å…¥ä¸‹ä¸€é¢˜</p>
        </section>

        <section id="resultSection" class="section">
            <div class="top-badge">ğŸ† æŒ‘æˆ˜å®Œæˆ</div>
            <h2 class="title" style="margin-bottom:0.2rem;">é»˜å¥‘ç»“æœ</h2>
            <div class="score">
                <div id="scoreNum" class="score-num">0</div>
                <div id="scoreText" class="desc" style="margin:0.35rem 0 0;">æ€»åˆ† / 120</div>
            </div>
            <div id="resultTitle" class="result-title"></div>
            <div id="resultDesc" class="result-desc"></div>
            <div id="answerList" class="answer-list"></div>
            <button id="restartBtn" class="btn btn-main" style="margin-top: 0.9rem;">å†ç©ä¸€æ¬¡</button>
            <button id="copyBtn" class="btn btn-sub">å¤åˆ¶ç»“æœæ–‡æ¡ˆ</button>
            <div class="footer">å¹¸ç¦æ˜¯åŒå‘å¥”èµ´</div>
        </section>
    </main>

    <script>
        const QUESTIONS = [
            {
                text: "å‘¨æœ«æ›´æƒ³æ€ä¹ˆçº¦ä¼šï¼Ÿ",
                options: ["å®…å®¶çœ‹ç”µå½±", "å‡ºé—¨é€›åƒæ‰“å¡"]
            },
            {
                text: "å¦‚æœå¯¹æ–¹ä¸å¼€å¿ƒï¼Œä½ ä¼šå…ˆï¼Ÿ",
                options: ["å…ˆæŠ±æŠ±å®‰æ…°", "å…ˆé—®æ¸…åŸå› "]
            },
            {
                text: "çºªå¿µæ—¥ç¤¼ç‰©åå¥½æ˜¯ï¼Ÿ",
                options: ["å®ç”¨å‹ç¤¼ç‰©", "ä»ªå¼æ„ŸæƒŠå–œ"]
            },
            {
                text: "æ—…è¡Œä¼šé€‰å“ªç§èŠ‚å¥ï¼Ÿ",
                options: ["æ…¢æ…¢èµ°æ…¢æ…¢æ‹", "é«˜æ•ˆæ‰“å¡å†²æ™¯ç‚¹"]
            },
            {
                text: "åµæ¶åæ›´å¸Œæœ›æ€ä¹ˆå’Œå¥½ï¼Ÿ",
                options: ["å½“æ™šå°±è¯´å¼€", "å†·é™åå†èŠ"]
            },
            {
                text: "æœªæ¥æœ€æƒ³ä¸€èµ·åšçš„äº‹ï¼Ÿ",
                options: ["å…»ä¸€åªå® ç‰©", "ä¸€èµ·ç¯æ¸¸æ—…è¡Œ"]
            }
        ];

        const state = {
            names: ["ç©å®¶A", "ç©å®¶B"],
            currentIndex: 0,
            phase: 0,
            score: 0,
            answersA: [],
            answersB: [],
            detail: []
        };

        const startSection = document.getElementById("startSection");
        const gameSection = document.getElementById("gameSection");
        const resultSection = document.getElementById("resultSection");

        const nameAInput = document.getElementById("nameA");
        const nameBInput = document.getElementById("nameB");

        const progressLabel = document.getElementById("progressLabel");
        const scoreLabel = document.getElementById("scoreLabel");
        const barFill = document.getElementById("barFill");
        const questionText = document.getElementById("questionText");
        const turnText = document.getElementById("turnText");
        const choicesEl = document.getElementById("choices");
        const tipText = document.getElementById("tipText");

        const scoreNum = document.getElementById("scoreNum");
        const scoreText = document.getElementById("scoreText");
        const resultTitle = document.getElementById("resultTitle");
        const resultDesc = document.getElementById("resultDesc");
        const answerList = document.getElementById("answerList");

        document.getElementById("startBtn").addEventListener("click", startGame);
        document.getElementById("restartBtn").addEventListener("click", resetGame);
        document.getElementById("copyBtn").addEventListener("click", copySummary);

        function startGame() {
            const nameA = nameAInput.value.trim();
            const nameB = nameBInput.value.trim();
            state.names[0] = nameA || "ç©å®¶A";
            state.names[1] = nameB || "ç©å®¶B";
            showSection("game");
            renderQuestion();
        }

        function showSection(target) {
            startSection.classList.remove("active");
            gameSection.classList.remove("active");
            resultSection.classList.remove("active");
            if (target === "start") startSection.classList.add("active");
            if (target === "game") gameSection.classList.add("active");
            if (target === "result") resultSection.classList.add("active");
        }

        function renderQuestion() {
            const question = QUESTIONS[state.currentIndex];
            const total = QUESTIONS.length;
            questionText.textContent = question.text;
            progressLabel.textContent = `ç¬¬ ${state.currentIndex + 1} / ${total} é¢˜`;
            scoreLabel.textContent = `å½“å‰åˆ†æ•° ${state.score}`;
            barFill.style.width = `${(state.currentIndex / total) * 100}%`;

            const currentPlayer = state.phase === 0 ? state.names[0] : state.names[1];
            turnText.textContent = `${currentPlayer} è¯·é€‰æ‹©ä½ çš„ç­”æ¡ˆ`;
            tipText.textContent = state.phase === 0
                ? `${state.names[1]} æš‚æ—¶åˆ«çœ‹å±å¹• ğŸ‘€`
                : `${state.names[0]} å·²ä½œç­”ï¼Œè½®åˆ° ${state.names[1]} äº†`;

            choicesEl.innerHTML = "";
            question.options.forEach((option, index) => {
                const button = document.createElement("button");
                button.className = "choice-btn";
                button.textContent = `${String.fromCharCode(65 + index)}. ${option}`;
                button.addEventListener("click", () => selectAnswer(index));
                choicesEl.appendChild(button);
            });
        }

        function selectAnswer(optionIndex) {
            const question = QUESTIONS[state.currentIndex];

            if (state.phase === 0) {
                state.answersA[state.currentIndex] = optionIndex;
                state.phase = 1;
                renderQuestion();
                return;
            }

            state.answersB[state.currentIndex] = optionIndex;
            const answerA = state.answersA[state.currentIndex];
            const answerB = state.answersB[state.currentIndex];
            const isMatch = answerA === answerB;
            if (isMatch) {
                state.score += 20;
                burstHearts();
            }

            state.detail.push({
                q: question.text,
                a: question.options[answerA],
                b: question.options[answerB],
                match: isMatch
            });

            state.currentIndex += 1;
            state.phase = 0;

            if (state.currentIndex >= QUESTIONS.length) {
                showResult();
                return;
            }

            renderQuestion();
        }

        function showResult() {
            showSection("result");
            const totalScore = state.score;
            scoreNum.textContent = totalScore;
            scoreText.textContent = `æ€»åˆ† / ${QUESTIONS.length * 20}`;

            let title = "å¿ƒæœ‰çµçŠ€";
            let desc = "ä½ ä»¬çš„é¢‘ç‡éå¸¸æ¥è¿‘ï¼Œå¾ˆå¤šæ—¶åˆ»éƒ½èƒ½æƒ³åˆ°ä¸€èµ·ï¼Œç»§ç»­ä¿æŒè¿™ä»½é»˜å¥‘å’Œæ²Ÿé€šå§ã€‚";

            if (totalScore < 40) {
                title = "ç”œèœœç£¨åˆæœŸ";
                desc = "ä½ ä»¬é£æ ¼ä¸åŒä½†å¾ˆäº’è¡¥ï¼Œå¤šèŠèŠå½¼æ­¤åå¥½ï¼Œé»˜å¥‘ä¼šå¿«é€Ÿä¸Šå‡ã€‚";
            } else if (totalScore < 80) {
                title = "æ¸©æŸ”åŒæ­¥ä¸­";
                desc = "å·²ç»æœ‰ç¨³å®šé»˜å¥‘äº†ï¼Œå†å¤šä¸€ç‚¹è¡¨è¾¾å’Œå€¾å¬ï¼Œä¼šæ›´æ‡‚å¯¹æ–¹ã€‚";
            } else if (totalScore < 120) {
                title = "é«˜ç”œæ­æ¡£";
                desc = "ä½ ä»¬åœ¨å…³é”®é€‰æ‹©ä¸Šå¾ˆä¸€è‡´ï¼Œæ˜¯å¾ˆä¼šç»è¥å…³ç³»çš„ä¸€å¯¹ã€‚";
            }

            resultTitle.textContent = `${title} Â· ${state.names[0]} & ${state.names[1]}`;
            resultDesc.textContent = desc;

            answerList.innerHTML = "";
            state.detail.forEach((item, idx) => {
                const row = document.createElement("div");
                row.className = "answer-item";
                const statusClass = item.match ? "good" : "bad";
                const statusText = item.match ? "é»˜å¥‘+20" : "æœ¬é¢˜æœªåŒé€‰";
                row.innerHTML = `${idx + 1}. ${item.q}<br>${state.names[0]}ï¼š${item.a} ï½œ ${state.names[1]}ï¼š${item.b} Â· <span class="${statusClass}">${statusText}</span>`;
                answerList.appendChild(row);
            });

            barFill.style.width = "100%";
            burstHearts(45);
        }

        function resetGame() {
            state.currentIndex = 0;
            state.phase = 0;
            state.score = 0;
            state.answersA = [];
            state.answersB = [];
            state.detail = [];
            showSection("start");
        }

        function copySummary() {
            const summary = `æˆ‘ä»¬åˆšç©äº†æƒ…ä¾£é»˜å¥‘æŒ‘æˆ˜ï¼š${state.names[0]} & ${state.names[1]} å¾—åˆ† ${state.score}/${QUESTIONS.length * 20}ï¼Œç»“æœæ˜¯â€œ${resultTitle.textContent}â€ã€‚`;
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(summary).then(() => {
                    alert("ç»“æœæ–‡æ¡ˆå·²å¤åˆ¶");
                }).catch(() => {
                    fallbackCopy(summary);
                });
            } else {
                fallbackCopy(summary);
            }
        }

        function fallbackCopy(text) {
            const textarea = document.createElement("textarea");
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand("copy");
                alert("ç»“æœæ–‡æ¡ˆå·²å¤åˆ¶");
            } catch (e) {
                alert("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶");
            }
            textarea.remove();
        }

        function burstHearts(count = 18) {
            const icons = ["ğŸ’—", "ğŸ’–", "ğŸ’•", "ğŸ’˜", "ğŸ’"];
            for (let i = 0; i < count; i++) {
                const heart = document.createElement("div");
                heart.className = "float-heart";
                heart.textContent = icons[Math.floor(Math.random() * icons.length)];
                heart.style.left = Math.random() * 100 + "vw";
                heart.style.bottom = "-2rem";
                heart.style.animationDuration = (Math.random() * 1.2 + 1.9) + "s";
                heart.style.fontSize = (Math.random() * 0.8 + 1) + "rem";
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 3200);
            }
        }
    </script>
</body>
</html>
